<?
$content = file_get_contents("../inc/content.json");
$contentData = json_decode($content, true);
?>
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Canva Island</title>
		<link rel="preconnect" href="https://fonts.gstatic.com">
		 <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
		 <link rel="stylesheet" href="../css/fonts.css">
		<style>
			body { margin: 0;  font-family: 'Gouranga'; }
			
			.dg .property-name { font-family: 'Gouranga'; }
			.dg li.title { font-family: 'Gouranga'; }
			.dg.ac { z-index: 5 !important; }
			.dg.main .close-button { font-family: 'Gouranga'; }
			
			canvas { display: block; }
		
			html { overflow: hidden; background: linear-gradient(to bottom, #9be2fe 0%,#67d1fb 100%);}
			
			.label {
				width: auto;
				position: absolute;
				z-index: 2;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 5px;
			}
			
			.label.active {
				padding: 1.8rem;
			}
			.label:after {
				content: " ";
				position: absolute;
				width: 100%;
				left: 0;
				height: 100%;
				top: 0;
				right: 0;
				left: 0;
				bottom: 0;
			}

			.label span {
				display: block;
				width: auto;
				background-color: black;
				color: #fff;
				text-align: center;
				padding: 5px 5px;
				border-radius: 6px;
				position: relative;
				z-index: 0;
				cursor: pointer;
				transition: background-color 0.2s ease;
			}

			.label span::after {
				content: " ";
				position: absolute;
				top: 100%;
				left: 50%;
				margin-left: -5px;
				border-width: 5px;
				border-style: solid;
				border-color: black transparent transparent transparent;
				transition: border-color 0.2s ease;
			}
			
			.label:hover span {
				background-color: rgba(255,0,0, 0.6);
			}
			.label:hover span::after {
				border-color: rgba(255,0,0, 0.6) transparent transparent transparent;
			}
			.label.hide { display: none; }
			canvas { position: relative; z-index: 2; }
			.version { background: rgba(0,0,0,0.8); padding: 5px; position: fixed; bottom: 0; left: 0; z-index: 5; color: #fff; font-size: 14px; text-align: center }
			.info { background: rgba(0,0,0,0.8); padding: 10px; position: fixed; top: 0; left: 0; z-index: 5; color: #fff; font-size: 14px; text-align: center }
			.info h1 { margin: 0; font-size: 18px;}
			.info h1 a {  color: #fff; text-decoration: none; }
			.info h1 a:hover {  color: #3291E9; text-decoration: none; }
			
			.soc { display: flex; margin-top: 10px; }
			.soc a { display: block; text-decoration: none;  }
			.soc svg { width: 24px; width: 24px; fill: #fff; color: #fff; padding: 5px; }
			.soc a:hover svg { color: #00ff00;  }
			.opensea-soc:hover svg { fill: #3291E9; }
			.opensea { background: rgba(0,0,0,0.8); padding: 5px; position: fixed; bottom: 0; right: 0; z-index: 5; color: #fff; font-size: 14px; }
			.opensea a { color: #fff; }

			#background-wrap{bottom:0;left:0;padding-top:50px;position:fixed;right:0;top:0;z-index:-1}
			@-webkit-keyframes animateCloud{0%{margin-left:-1000px}100%{margin-left:100%}}
			@-moz-keyframes animateCloud{0%{margin-left:-1000px}100%{margin-left:100%}}
			@keyframes animateCloud{0%{margin-left:-1000px}100%{margin-left:100%}}
			.x1{-webkit-animation:animateCloud 35s linear infinite;-moz-animation:animateCloud 35s linear infinite;animation:animateCloud 35s linear infinite;-webkit-transform:scale(.65);-moz-transform:scale(.65);transform:scale(.65)}
			.x2{-webkit-animation:animateCloud 20s linear infinite;-moz-animation:animateCloud 20s linear infinite;animation:animateCloud 20s linear infinite;-webkit-transform:scale(.3);-moz-transform:scale(.3);transform:scale(.3)}
			.x3{-webkit-animation:animateCloud 30s linear infinite;-moz-animation:animateCloud 30s linear infinite;animation:animateCloud 30s linear infinite;-webkit-transform:scale(.5);-moz-transform:scale(.5);transform:scale(.5)}
			.x4{-webkit-animation:animateCloud 18s linear infinite;-moz-animation:animateCloud 18s linear infinite;animation:animateCloud 18s linear infinite;-webkit-transform:scale(.4);-moz-transform:scale(.4);transform:scale(.4)}
			.x5{-webkit-animation:animateCloud 25s linear infinite;-moz-animation:animateCloud 25s linear infinite;animation:animateCloud 25s linear infinite;-webkit-transform:scale(.55);-moz-transform:scale(.55);transform:scale(.55)}
			.cloud{background:#fff;background:-moz-linear-gradient(top,#fff 5%,#f1f1f1 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(5%,#fff),color-stop(100%,#f1f1f1));background:-webkit-linear-gradient(top,#fff 5%,#f1f1f1 100%);background:-o-linear-gradient(top,#fff 5%,#f1f1f1 100%);background:-ms-linear-gradient(top,#fff 5%,#f1f1f1 100%);background:linear-gradient(top,#fff 5%,#f1f1f1 100%);-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;-webkit-box-shadow:0 8px 5px rgba(0,0,0,.1);-moz-box-shadow:0 8px 5px rgba(0,0,0,.1);box-shadow:0 8px 5px rgba(0,0,0,.1);height:120px;position:relative;width:350px}
			.cloud:after,.cloud:before{background:#fff;content:'';position:absolute;z-indeX:-1}
			.cloud:after{-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;height:100px;left:50px;top:-50px;width:100px}
			.cloud:before{-webkit-border-radius:200px;-moz-border-radius:200px;border-radius:200px;width:180px;height:180px;right:50px;top:-90px}
			
		</style>
	</head>
	<body>

	<div class="info">
		<h1><a href="https://canvaisland.com"><?=$contentData["Title"];?></a></h1>
		<div class="soc">
			<a href="<?=$contentData["links"]["instagram"];?>" target="_blank">
				<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="instagram" class="svg-inline--fa fa-instagram fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg>
			</a>
			<a href="<?=$contentData["links"]["twitter"];?>" target="_blank">
				<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
			</a>
			<a href="<?=$contentData["links"]["telegram"];?>" target="_blank">
				<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="telegram-plane" class="svg-inline--fa fa-telegram-plane fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"></path></svg>
			</a>
			<a href="<?=$contentData["links"]["discord"];?>" target="_blank">
				<svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="discord" class="svg-inline--fa fa-discord fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"></path></svg>
			</a>
			<a href="<?=$contentData["links"]["opensea_island"];?>" target="_blank" class="opensea-soc">
				<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
					 viewBox="0 0 116 116" enable-background="new 0 0 116 116" xml:space="preserve">
				<path d="M84.3,65.5c-0.2-0.2-0.5-0.2-0.8-0.1l-0.7,0.3c-3.4,1.7-7.2,2.5-11,2.5c-0.2,0-0.3,0.1-0.3,0.2
					c-0.4,1.8-1.9,3.1-3.8,3.1h-7.8v-6.5H60c0.5,0.1,0.9,0.1,1.4,0.2c3.3,0.5,4.9,2,5.6,2.7l0,0l0.1,0.1c0.1,0.1,0.3,0.1,0.4,0
					c0.1-0.1,0.2-0.2,0.4-0.3c1.2-0.8,4-2.5,4-11.5c0-9.2-7-15.4-7.8-15.8c0,0,0,0,0,0c0,0,0,0,0,0l0,0h0L60,40.1l-0.1,0v-2.6
					c0.8-0.5,1.4-1.4,1.4-2.5c0-1.6-1.2-2.9-2.8-2.9c-1.6,0-2.8,1.3-2.8,2.9c0,1,0.5,1.9,1.4,2.4v2.2L51.2,39c-0.3,0-0.5,0.3-0.3,0.5
					c1,1.6,3.7,6.6,3.9,14.1c0.2,7-0.9,10.3-1.4,11.5c-0.1,0.1-0.1,0.2,0,0.3l0,0c0.1,0.1,0.2,0.1,0.3,0.1c0.7-0.1,1.9-0.3,3.4-0.4v6.5
					h-6.5c-2.1,0-3.9-1.8-3.9-3.9v-1.6c0-0.2-0.1-0.3-0.3-0.3H34.3c-0.1,0-0.3,0.1-0.3,0.3c0,0.3,0,0.6,0,0.9c0,4.5,1.3,8.6,3.5,12.2
					c0.4,0.6,1.1,0.9,1.7,0.6l1.3-0.6c1-0.5,2.2-0.5,3.3,0l1.4,0.6c1,0.5,2.2,0.5,3.3,0l1.4-0.6c1.1-0.5,2.2-0.5,3.3,0l1.4,0.6
					c1.1,0.5,2.2,0.5,3.3,0l1.4-0.6c1.1-0.5,2.2-0.5,3.3,0l1.4,0.6c1.1,0.5,2.2,0.5,3.3,0l1.4-0.6c1.1-0.5,2.2-0.5,3.3,0l1.4,0.6
					c0.9,0.4,1.9-0.1,2.4-1c0.8-1.3,1.5-2.8,2-4.2c1.1-3.3,3.1-6.4,6.2-7.9c0.3-0.1,0.4-0.4,0.4-0.7C84.6,65.9,84.5,65.6,84.3,65.5z
					 M39.7,63.3h11.4c0.2,0,0.3-0.1,0.3-0.3V50.6c0-0.1-0.1-0.2-0.2-0.3l-5.6-2.6c-0.1-0.1-0.3,0-0.4,0.2l-5.8,14.9
					C39.3,63.1,39.5,63.3,39.7,63.3z M58,0C26,0,0,26,0,58s26,58,58,58s58-26,58-58S90,0,58,0z M57.8,100.2C34.7,100.2,16,81.5,16,58.3
					c0-23.1,18.7-41.9,41.8-41.9s41.8,18.8,41.8,41.9C99.5,81.5,80.8,100.2,57.8,100.2z M83.5,65.4l-0.7,0.3c-3.4,1.7-7.2,2.5-11,2.5
					c-0.2,0-0.3,0.1-0.3,0.2c-0.4,1.8-1.9,3.1-3.8,3.1h-7.8v-6.5H60c0.5,0.1,0.9,0.1,1.4,0.2c3.3,0.5,4.9,2,5.6,2.7l0,0l0.1,0.1
					c0.1,0.1,0.3,0.1,0.4,0c0.1-0.1,0.2-0.2,0.4-0.3c1.2-0.8,4-2.5,4-11.5c0-9.2-7-15.4-7.8-15.8c0,0,0,0,0,0c0,0,0,0,0,0l0,0h0L60,40.1
					l-0.1,0v-2.6c0.8-0.5,1.4-1.4,1.4-2.5c0-1.6-1.2-2.9-2.8-2.9c-1.6,0-2.8,1.3-2.8,2.9c0,1,0.5,1.9,1.4,2.4v2.2L51.2,39
					c-0.3,0-0.5,0.3-0.3,0.5c1,1.6,3.7,6.6,3.9,14.1c0.2,7-0.9,10.3-1.4,11.5c-0.1,0.1-0.1,0.2,0,0.3l0,0c0.1,0.1,0.2,0.1,0.3,0.1
					c0.7-0.1,1.9-0.3,3.4-0.4v6.5h-6.5c-2.1,0-3.9-1.8-3.9-3.9v-1.6c0-0.2-0.1-0.3-0.3-0.3H34.3c-0.1,0-0.3,0.1-0.3,0.3
					c0,0.3,0,0.6,0,0.9c0,4.5,1.3,8.6,3.5,12.2c0.4,0.6,1.1,0.9,1.7,0.6l1.3-0.6c1-0.5,2.2-0.5,3.3,0l1.4,0.6c1,0.5,2.2,0.5,3.3,0
					l1.4-0.6c1.1-0.5,2.2-0.5,3.3,0l1.4,0.6c1.1,0.5,2.2,0.5,3.3,0l1.4-0.6c1.1-0.5,2.2-0.5,3.3,0l1.4,0.6c1.1,0.5,2.2,0.5,3.3,0
					l1.4-0.6c1.1-0.5,2.2-0.5,3.3,0l1.4,0.6c0.9,0.4,1.9-0.1,2.4-1c0.8-1.3,1.5-2.8,2-4.2c1.1-3.3,3.1-6.4,6.2-7.9
					c0.3-0.1,0.4-0.4,0.4-0.7c0-0.2-0.1-0.5-0.3-0.6C84.1,65.4,83.8,65.3,83.5,65.4z M39.7,63.3h11.4c0.2,0,0.3-0.1,0.3-0.3V50.6
					c0-0.1-0.1-0.2-0.2-0.3l-5.6-2.6c-0.1-0.1-0.3,0-0.4,0.2l-5.8,14.9C39.3,63.1,39.5,63.3,39.7,63.3z"/>
				<path d="M51.2,50.4l-5.6-2.6c-0.1-0.1-0.3,0-0.4,0.2l-5.8,14.9c-0.1,0.2,0.1,0.4,0.3,0.4h11.4c0.2,0,0.3-0.1,0.3-0.3
					V50.6C51.4,50.5,51.3,50.4,51.2,50.4z M84.3,65.5c-0.2-0.2-0.5-0.2-0.8-0.1l-0.7,0.3c-3.4,1.7-7.2,2.5-11,2.5
					c-0.2,0-0.3,0.1-0.3,0.2c-0.4,1.8-1.9,3.1-3.8,3.1h-7.8v-6.5H60c0.5,0.1,0.9,0.1,1.4,0.2c3.3,0.5,4.9,2,5.6,2.7l0,0l0.1,0.1
					c0.1,0.1,0.3,0.1,0.4,0c0.1-0.1,0.2-0.2,0.4-0.3c1.2-0.8,4-2.5,4-11.5c0-9.2-7-15.4-7.8-15.8c0,0,0,0,0,0c0,0,0,0,0,0l0,0h0L60,40.1
					l-0.1,0v-2.6c0.8-0.5,1.4-1.4,1.4-2.5c0-1.6-1.2-2.9-2.8-2.9c-1.6,0-2.8,1.3-2.8,2.9c0,1,0.5,1.9,1.4,2.4v2.2L51.2,39
					c-0.3,0-0.5,0.3-0.3,0.5c1,1.6,3.7,6.6,3.9,14.1c0.2,7-0.9,10.3-1.4,11.5c-0.1,0.1-0.1,0.2,0,0.3l0,0c0.1,0.1,0.2,0.1,0.3,0.1
					c0.7-0.1,1.9-0.3,3.4-0.4v6.5h-6.5c-2.1,0-3.9-1.8-3.9-3.9v-1.6c0-0.2-0.1-0.3-0.3-0.3H34.3c-0.1,0-0.3,0.1-0.3,0.3
					c0,0.3,0,0.6,0,0.9c0,4.5,1.3,8.6,3.5,12.2c0.4,0.6,1.1,0.9,1.7,0.6l1.3-0.6c1-0.5,2.2-0.5,3.3,0l1.4,0.6c1,0.5,2.2,0.5,3.3,0
					l1.4-0.6c1.1-0.5,2.2-0.5,3.3,0l1.4,0.6c1.1,0.5,2.2,0.5,3.3,0l1.4-0.6c1.1-0.5,2.2-0.5,3.3,0l1.4,0.6c1.1,0.5,2.2,0.5,3.3,0
					l1.4-0.6c1.1-0.5,2.2-0.5,3.3,0l1.4,0.6c0.9,0.4,1.9-0.1,2.4-1c0.8-1.3,1.5-2.8,2-4.2c1.1-3.3,3.1-6.4,6.2-7.9
					c0.3-0.1,0.4-0.4,0.4-0.7C84.6,65.9,84.5,65.6,84.3,65.5z"/>
				</svg>

			</a>
		</div>
	</div>
	<div class="version">alpha</div>
	<div class="opensea"><a href="<?=$contentData["links"]["opensea_island"];?>" target="_blank">buy at opensea.io</a></div>
		<div id="background-wrap">
			<div class="x1">
				<div class="cloud"></div>
			</div>

			<div class="x2">
				<div class="cloud"></div>
			</div>

			<div class="x3">
				<div class="cloud"></div>
			</div>

			<div class="x4">
				<div class="cloud"></div>
			</div>

			<div class="x5">
				<div class="cloud"></div>
			</div>
		</div>
	<canvas id="island"></canvas>
	
<script src="https://unpkg.com/three@0.87.1/build/three.js"></script>
<script src="https://unpkg.com/three@0.87.1/examples/js/controls/OrbitControls.js"></script>
<script src='https://unpkg.com/three@0.87.1/examples/js/renderers/CSS2DRenderer.js'></script>
<script src="https://unpkg.com/three@0.87.1/examples/js/loaders/GLTFLoader.js"></script>
<script src="https://unpkg.com/three@0.87.1/examples/js/libs/dat.gui.min.js"></script>
	
<script>
class StringIdGenerator {
  constructor(chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ') {
    this._chars = chars;
    this._nextId = [0];
  }

  next() {
    const r = [];
    for (const char of this._nextId) {
      r.unshift(this._chars[char]);
    }
    this._increment();
    return r.join('');
  }

  _increment() {
    for (let i = 0; i < this._nextId.length; i++) {
      const val = ++this._nextId[i];
      if (val >= this._chars.length) {
        this._nextId[i] = 0;
      } else {
        return;
      }
    }
    this._nextId.push(0);
  }

  *[Symbol.iterator]() {
    while (true) {
      yield this.next();
    }
  }
}

class ColorGUIHelper {
	constructor(object, prop) {
		this.object = object;
		this.prop = prop;
	}
	get value() {
		return `#${this.object[this.prop].getHexString()}`;
	}
	set value(hexString) {
		this.object[this.prop].set(hexString);
	}
}

function centerCam() {
	camera.position.set(100, 150, 220);
	controls.target.set(100, 0, 100)
	controls.update();
}

function clearTiles() {
	for (let i = scene.children.length - 1; i >= 0; i--) {
		if(scene.children[i].type === "Scene")
		scene.remove(scene.children[i]);
	}
	document.querySelectorAll('.label').forEach(e => e.remove());
}
</script>

<script>
const params = {
	showLabels: false,
	centerCam: centerCam,
	days: <?php echo $days-1; ?>
};


var renderCalls = [];
function render () {
	requestAnimationFrame( render );
	renderCalls.forEach((callback)=>{ callback(); });
}
render();
getTiles();
/*////////////////////////////////////////*/

const canvas = document.querySelector('#island');
var scene = new THREE.Scene();

var camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
camera.position.set(100, 150, 220);


var renderer = new THREE.WebGLRenderer( { canvas: canvas, antialias: true, alpha: true } );
renderer.setPixelRatio( window.devicePixelRatio );
renderer.setSize( window.innerWidth, window.innerHeight );
renderer.setClearColor( 0x000000, 0  );

renderer.toneMapping = THREE.LinearToneMapping;
renderer.toneMappingExposure = Math.pow( 0.94, 5.0 );
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFShadowMap;


var labelRenderer = new THREE.CSS2DRenderer();
labelRenderer.setSize( window.innerWidth, window.innerHeight );
labelRenderer.domElement.style.position = 'absolute';
labelRenderer.domElement.style.top = '0px';


window.addEventListener( 'resize', function () {
	camera.aspect = window.innerWidth / window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize( window.innerWidth, window.innerHeight );
	labelRenderer.setSize( window.innerWidth, window.innerHeight );
}, false );


document.body.appendChild( renderer.domElement );

document.body.appendChild( labelRenderer.domElement );

function renderScene(){ 
	renderer.render( scene, camera ); 
	labelRenderer.render( scene, camera );
}
renderCalls.push(renderScene);

var controls = new THREE.OrbitControls( camera, canvas );

controls.rotateSpeed = 0.5;
controls.zoomSpeed = 0.5;

controls.minDistance = 3;
controls.maxDistance = 500;

controls.minPolarAngle = 0; // radians
controls.maxPolarAngle = Math.PI /2; // radians

controls.target.set(100, 0, 100)

renderCalls.push(function(){
	controls.update()

	if ( params.showLabels ) {
		labelRenderer.domElement.style.display = 'block'
	} else {
		labelRenderer.domElement.style.display = 'none'
	}
});


/* ////////////////////////////////////////////////////////////////////////// */
var lightGlobal = new THREE.PointLight( 0xffffcc, 1);
lightGlobal.position.set( 256, 512, 256 );
scene.add( lightGlobal );

var lightAmbientGlobal = new THREE.AmbientLight( 0xffffcc, 1);
scene.add( lightAmbientGlobal );
/* ////////////////////////////////////////////////////////////////////////// */

function getTiles() {

	let tilesObj = [];
	let tilesDivObj = [];
	let tilesLabelObj = [];

	let tilesW = 16;
	let tilesH = 16;

	const tileSize = 12.8;
	const abc = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"];

	var loader = new THREE.GLTFLoader();
	loader.crossOrigin = true;

	let currentTile;

	for (let i = 0; i < tilesH; i++) {

	const tileLetter = new StringIdGenerator();

		for (let j = 0; j < tilesW; j++) {

			currentTile = (i + 1) + tileLetter.next();

			loader.load( '/island-view/day150/' + currentTile + '.gltf', function ( data ) {

				var tileX = i * tileSize;
				var tileZ = j * tileSize;

				var aaa = tilesObj.push(data.scene) - 1;
				tilesObj[aaa].position.set(tileX, 0, tileZ);
				tilesObj[aaa].name = (i + 1) + abc[j];
				tilesObj[aaa].type.set = 'tile';

				var div  = document.createElement( 'div' );
				var span = document.createElement( 'span' );
				div.className = 'label';
				span.textContent = (i + 1) + abc[j];
				div.appendChild(span);
				var bbb = tilesDivObj.push(div) - 1;

				var ccc = tilesLabelObj.push(new THREE.CSS2DObject( tilesDivObj[bbb] )) - 1;
				tilesLabelObj[ccc].position.set( 0 , 10 , 0 );
				tilesObj[aaa].add( tilesLabelObj[ccc] );

				scene.add( tilesObj[aaa] );

			});

		}

	}

}
</script>
		
<script>
const gui = new dat.GUI();

gui.add( params, 'showLabels' ).name( 'Show Labels' );
gui.add( params, 'centerCam' ).name( 'Center Cam' );

var lightGUI = gui.addFolder('Global Light');
lightGUI.add(lightGlobal, 'intensity', 0, 2, 0.05).name( 'Intensity' );
lightGUI.addColor(new ColorGUIHelper(lightGlobal, 'color'), 'value').name( 'Color' );
</script>
		
<script>
const tokens = {
	'1A' : '55098772033182588594042628592868878947454846945185246181960728113536108068865',
	'2A' : '55098772033182588594042628592868878947454846945185246181960728114635619696641',
	'3A' : '55098772033182588594042628592868878947454846945185246181960728116834642952193',
	'4A' : '55098772033182588594042628592868878947454846945185246181960728117934154579969',
	'1B' : '55098772033182588594042628592868878947454846945185246181960728119033666207745',
	'2B' : '55098772033182588594042628592868878947454846945185246181960728120133177835521',
	'3B' : '55098772033182588594042628592868878947454846945185246181960728121232689463297',
	'4B' : '55098772033182588594042628592868878947454846945185246181960728122332201091073',
	'1C' : '55098772033182588594042628592868878947454846945185246181960728123431712718849',
	'2C' : '55098772033182588594042628592868878947454846945185246181960728124531224346625',
	'3C' : '55098772033182588594042628592868878947454846945185246181960728125630735974401',
	'4C' : '55098772033182588594042628592868878947454846945185246181960728126730247602177',
	'1D' : '55098772033182588594042628592868878947454846945185246181960728127829759229953',
	'2D' : '55098772033182588594042628592868878947454846945185246181960728128929270857729',
	'3D' : '55098772033182588594042628592868878947454846945185246181960728130028782485505',
	'4D' : '55098772033182588594042628592868878947454846945185246181960728131128294113281',
	'1E' : '55098772033182588594042628592868878947454846945185246181960728132227805741057',
	'1F' : '55098772033182588594042628592868878947454846945185246181960728133327317368833',
	'1G' : '55098772033182588594042628592868878947454846945185246181960728134426828996609',
	'1H' : '55098772033182588594042628592868878947454846945185246181960728135526340624385',
	'2E' : '55098772033182588594042628592868878947454846945185246181960728136625852252161',
	'2F' : '55098772033182588594042628592868878947454846945185246181960728137725363879937',
	'2G' : '55098772033182588594042628592868878947454846945185246181960728138824875507713',
	'2H' : '55098772033182588594042628592868878947454846945185246181960728139924387135489',
	'3E' : '55098772033182588594042628592868878947454846945185246181960728141023898763265',
	'3F' : '55098772033182588594042628592868878947454846945185246181960728142123410391041',
	'3G' : '55098772033182588594042628592868878947454846945185246181960728143222922018817',
	'3H' : '55098772033182588594042628592868878947454846945185246181960728144322433646593',
	'4E' : '55098772033182588594042628592868878947454846945185246181960728145421945274369',
	'4F' : '55098772033182588594042628592868878947454846945185246181960728146521456902145',
	'4G' : '55098772033182588594042628592868878947454846945185246181960728147620968529921',
	'4H' : '55098772033182588594042628592868878947454846945185246181960728148720480157697',
	'5A' : '55098772033182588594042628592868878947454846945185246181960728149819991785473',
	'5B' : '55098772033182588594042628592868878947454846945185246181960728150919503413249',
	'5C' : '55098772033182588594042628592868878947454846945185246181960728152019015041025',
	'5D' : '55098772033182588594042628592868878947454846945185246181960728153118526668801',
	'5E' : '55098772033182588594042628592868878947454846945185246181960728154218038296577',
	'5F' : '55098772033182588594042628592868878947454846945185246181960728155317549924353',
	'5G' : '55098772033182588594042628592868878947454846945185246181960728156417061552129',
	'5H' : '55098772033182588594042628592868878947454846945185246181960728157516573179905',
	'6A' : '55098772033182588594042628592868878947454846945185246181960728158616084807681',
	'6B' : '55098772033182588594042628592868878947454846945185246181960728159715596435457',
	'6C' : '55098772033182588594042628592868878947454846945185246181960728381816945246209',
	'6D' : '55098772033182588594042628592868878947454846945185246181960728161914619691009',
	'6E' : '55098772033182588594042628592868878947454846945185246181960728163014131318785',
	'6F' : '55098772033182588594042628592868878947454846945185246181960728164113642946561',
	'6G' : '55098772033182588594042628592868878947454846945185246181960728165213154574337',
	'6H' : '55098772033182588594042628592868878947454846945185246181960728166312666202113',
	'7A' : '55098772033182588594042628592868878947454846945185246181960728167412177829889',
	'7B' : '55098772033182588594042628592868878947454846945185246181960728168511689457665',
	'7C' : '55098772033182588594042628592868878947454846945185246181960728169611201085441',
	'7D' : '55098772033182588594042628592868878947454846945185246181960728170710712713217',
	'7E' : '55098772033182588594042628592868878947454846945185246181960728171810224340993',
	'7F' : '55098772033182588594042628592868878947454846945185246181960728172909735968769',
	'7G' : '55098772033182588594042628592868878947454846945185246181960728174009247596545',
	'7H' : '55098772033182588594042628592868878947454846945185246181960728175108759224321',
	'8A' : '55098772033182588594042628592868878947454846945185246181960728176208270852097',
	'8B' : '55098772033182588594042628592868878947454846945185246181960728177307782479873',
	'8C' : '55098772033182588594042628592868878947454846945185246181960728178407294107649',
	'8D' : '55098772033182588594042628592868878947454846945185246181960728179506805735425',
	'8E' : '55098772033182588594042628592868878947454846945185246181960728180606317363201',
	'8F' : '55098772033182588594042628592868878947454846945185246181960728181705828990977',
	'8G' : '55098772033182588594042628592868878947454846945185246181960728370821828968449',
	'8H' : '55098772033182588594042628592868878947454846945185246181960728183904852246529',
	'1I' : '55098772033182588594042628592868878947454846945185246181960728382916456873985',
	'2I' : '55098772033182588594042628592868878947454846945185246181960728384015968501761',
	'3I' : '55098772033182588594042628592868878947454846945185246181960728385115480129537',
	'4I' : '55098772033182588594042628592868878947454846945185246181960728386214991757313',
	'5I' : '55098772033182588594042628592868878947454846945185246181960728387314503385089',
	'6I' : '55098772033182588594042628592868878947454846945185246181960728388414015012865',
	'7I' : '55098772033182588594042628592868878947454846945185246181960728389513526640641',
	'8I' : '55098772033182588594042628592868878947454846945185246181960728390613038268417',
	'9I' : '55098772033182588594042628592868878947454846945185246181960728391712549896193',
	'9A' : '55098772033182588594042628592868878947454846945185246181960728392812061523969',
	'9B' : '55098772033182588594042628592868878947454846945185246181960728393911573151745',
	'9C' : '55098772033182588594042628592868878947454846945185246181960728395011084779521',
	'9D' : '55098772033182588594042628592868878947454846945185246181960728396110596407297',
	'9E' : '55098772033182588594042628592868878947454846945185246181960728397210108035073',
	'9F' : '55098772033182588594042628592868878947454846945185246181960728398309619662849',
	'9G' : '55098772033182588594042628592868878947454846945185246181960728399409131290625',
	'9H' : '55098772033182588594042628592868878947454846945185246181960728400508642918401',
	'1J' : '55098772033182588594042628592868878947454846945185246181960728401608154546177',
	'2J' : '55098772033182588594042628592868878947454846945185246181960728402707666173953',
	'3J' : '55098772033182588594042628592868878947454846945185246181960728403807177801729',
	'4J' : '55098772033182588594042628592868878947454846945185246181960728404906689429505',
	'5J' : '55098772033182588594042628592868878947454846945185246181960728406006201057281',
	'6J' : '55098772033182588594042628592868878947454846945185246181960728407105712685057',
	'7J' : '55098772033182588594042628592868878947454846945185246181960728408205224312833',
	'8J' : '55098772033182588594042628592868878947454846945185246181960728409304735940609',
	'9J' : '55098772033182588594042628592868878947454846945185246181960728410404247568385',
	'10J' : '55098772033182588594042628592868878947454846945185246181960728411503759196161',
	'10A' : '55098772033182588594042628592868878947454846945185246181960728412603270823937',
	'10B' : '55098772033182588594042628592868878947454846945185246181960728413702782451713',
	'10C' : '55098772033182588594042628592868878947454846945185246181960728414802294079489',
	'10D' : '55098772033182588594042628592868878947454846945185246181960728415901805707265',
	'10E' : '55098772033182588594042628592868878947454846945185246181960728417001317335041',
	'10F' : '55098772033182588594042628592868878947454846945185246181960728418100828962817',
	'10G' : '55098772033182588594042628592868878947454846945185246181960728419200340590593',
	'10H' : '55098772033182588594042628592868878947454846945185246181960728420299852218369',
	'10I' : '55098772033182588594042628592868878947454846945185246181960728421399363846145',
	'1K' : '55098772033182588594042628592868878947454846945185246181960728422498875473921',
	'2K' : '55098772033182588594042628592868878947454846945185246181960728423598387101697',
	'3K' : '55098772033182588594042628592868878947454846945185246181960728424697898729473',
	'4K' : '55098772033182588594042628592868878947454846945185246181960728425797410357249',
	'5K' : '55098772033182588594042628592868878947454846945185246181960728426896921985025',
	'6K' : '55098772033182588594042628592868878947454846945185246181960728427996433612801',
	'7K' : '55098772033182588594042628592868878947454846945185246181960728429095945240577',
	'8K' : '55098772033182588594042628592868878947454846945185246181960728430195456868353',
	'9K' : '55098772033182588594042628592868878947454846945185246181960728431294968496129',
	'10K' : '55098772033182588594042628592868878947454846945185246181960728432394480123905',
	'11K' : '55098772033182588594042628592868878947454846945185246181960728433493991751681',
	'11A' : '55098772033182588594042628592868878947454846945185246181960728434593503379457',
	'11B' : '55098772033182588594042628592868878947454846945185246181960728435693015007233',
	'11C' : '55098772033182588594042628592868878947454846945185246181960728436792526635009',
	'11D' : '55098772033182588594042628592868878947454846945185246181960728437892038262785',
	'11E' : '55098772033182588594042628592868878947454846945185246181960728438991549890561',
	'11F' : '55098772033182588594042628592868878947454846945185246181960728440091061518337',
	'11G' : '55098772033182588594042628592868878947454846945185246181960728441190573146113',
	'11H' : '55098772033182588594042628592868878947454846945185246181960728442290084773889',
	'11I' : '55098772033182588594042628592868878947454846945185246181960728443389596401665',
	'11J' : '55098772033182588594042628592868878947454846945185246181960728444489108029441',
	'12A' : '55098772033182588594042628592868878947454846945185246181960728445588619657217',
	'12B' : '55098772033182588594042628592868878947454846945185246181960728446688131284993',
	'12C' : '55098772033182588594042628592868878947454846945185246181960728447787642912769',
	'12D' : '55098772033182588594042628592868878947454846945185246181960728448887154540545',
	'12E' : '55098772033182588594042628592868878947454846945185246181960728449986666168321',
	'12F' : '55098772033182588594042628592868878947454846945185246181960728451086177796097',
	'12G' : '55098772033182588594042628592868878947454846945185246181960728452185689423873',
	'12H' : '55098772033182588594042628592868878947454846945185246181960728453285201051649',
	'12I' : '55098772033182588594042628592868878947454846945185246181960728454384712679425',
	'12J' : '55098772033182588594042628592868878947454846945185246181960728455484224307201',
	'12K' : '55098772033182588594042628592868878947454846945185246181960728456583735934977',
	'12L' : '55098772033182588594042628592868878947454846945185246181960728457683247562753',
	'1L' : '55098772033182588594042628592868878947454846945185246181960728458782759190529',
	'2L' : '55098772033182588594042628592868878947454846945185246181960728459882270818305',
	'3L' : '55098772033182588594042628592868878947454846945185246181960728460981782446081',
	'4L' : '55098772033182588594042628592868878947454846945185246181960728462081294073857',
	'5L' : '55098772033182588594042628592868878947454846945185246181960728463180805701633',
	'6L' : '55098772033182588594042628592868878947454846945185246181960728464280317329409',
	'7L' : '55098772033182588594042628592868878947454846945185246181960728465379828957185',
	'8L' : '55098772033182588594042628592868878947454846945185246181960728466479340584961',
	'9L' : '55098772033182588594042628592868878947454846945185246181960728467578852212737',
	'10L' : '55098772033182588594042628592868878947454846945185246181960728468678363840513',
	'11L' : '55098772033182588594042628592868878947454846945185246181960728469777875468289',
	'1M' : '55098772033182588594042628592868878947454846945185246181960728470877387096065',
	'2M' : '55098772033182588594042628592868878947454846945185246181960728471976898723841',
	'3M' : '55098772033182588594042628592868878947454846945185246181960728473076410351617',
	'4M' : '55098772033182588594042628592868878947454846945185246181960728474175921979393',
	'5M' : '55098772033182588594042628592868878947454846945185246181960728475275433607169',
	'6M' : '55098772033182588594042628592868878947454846945185246181960728476374945234945',
	'7M' : '55098772033182588594042628592868878947454846945185246181960728477474456862721',
	'8M' : '55098772033182588594042628592868878947454846945185246181960728478573968490497',
	'9M' : '55098772033182588594042628592868878947454846945185246181960728479673480118273',
	'10M' : '55098772033182588594042628592868878947454846945185246181960728480772991746049',
	'11M' : '55098772033182588594042628592868878947454846945185246181960728481872503373825',
	'12M' : '55098772033182588594042628592868878947454846945185246181960728482972015001601',
	'13M' : '55098772033182588594042628592868878947454846945185246181960728484071526629377',
	'13A' : '55098772033182588594042628592868878947454846945185246181960728485171038257153',
	'13B' : '55098772033182588594042628592868878947454846945185246181960728486270549884929',
	'13C' : '55098772033182588594042628592868878947454846945185246181960728487370061512705',
	'13D' : '55098772033182588594042628592868878947454846945185246181960728488469573140481',
	'13E' : '55098772033182588594042628592868878947454846945185246181960728489569084768257',
	'13F' : '55098772033182588594042628592868878947454846945185246181960728490668596396033',
	'13G' : '55098772033182588594042628592868878947454846945185246181960728491768108023809',
	'13H' : '55098772033182588594042628592868878947454846945185246181960728492867619651585',
	'13I' : '55098772033182588594042628592868878947454846945185246181960728493967131279361',
	'13J' : '55098772033182588594042628592868878947454846945185246181960728495066642907137',
	'13K' : '55098772033182588594042628592868878947454846945185246181960728496166154534913',
	'13L' : '55098772033182588594042628592868878947454846945185246181960728497265666162689',
	'1N' : '55098772033182588594042628592868878947454846945185246181960728498365177790465',
	'2N' : '55098772033182588594042628592868878947454846945185246181960728499464689418241',
	'3N' : '55098772033182588594042628592868878947454846945185246181960728500564201046017',
	'4N' : '55098772033182588594042628592868878947454846945185246181960728501663712673793',
	'5N' : '55098772033182588594042628592868878947454846945185246181960728502763224301569',
	'6N' : '55098772033182588594042628592868878947454846945185246181960728503862735929345',
	'7N' : '55098772033182588594042628592868878947454846945185246181960728504962247557121',
	'8N' : '55098772033182588594042628592868878947454846945185246181960728506061759184897',
	'9N' : '55098772033182588594042628592868878947454846945185246181960728507161270812673',
	'10N' : '55098772033182588594042628592868878947454846945185246181960728508260782440449',
	'11N' : '55098772033182588594042628592868878947454846945185246181960728509360294068225',
	'12N' : '55098772033182588594042628592868878947454846945185246181960728510459805696001',
	'13N' : '55098772033182588594042628592868878947454846945185246181960728511559317323777',
	'14N' : '55098772033182588594042628592868878947454846945185246181960728512658828951553',
	'14M' : '55098772033182588594042628592868878947454846945185246181960728513758340579329',
	'14L' : '55098772033182588594042628592868878947454846945185246181960728514857852207105',
	'14K' : '55098772033182588594042628592868878947454846945185246181960728517056875462657',
	'14J' : '55098772033182588594042628592868878947454846945185246181960728518156387090433',
	'14I' : '55098772033182588594042628592868878947454846945185246181960728519255898718209',
	'14H' : '55098772033182588594042628592868878947454846945185246181960728520355410345985',
	'14G' : '55098772033182588594042628592868878947454846945185246181960728521454921973761',
	'14F' : '55098772033182588594042628592868878947454846945185246181960728522554433601537',
	'14E' : '55098772033182588594042628592868878947454846945185246181960728523653945229313',
	'14D' : '55098772033182588594042628592868878947454846945185246181960728524753456857089',
	'14C' : '55098772033182588594042628592868878947454846945185246181960728525852968484865',
	'14B' : '55098772033182588594042628592868878947454846945185246181960728526952480112641',
	'14A' : '55098772033182588594042628592868878947454846945185246181960728528051991740417',
	'1O' : '55098772033182588594042628592868878947454846945185246181960728529151503368193',
	'2O' : '55098772033182588594042628592868878947454846945185246181960728530251014995969',
	'3O' : '55098772033182588594042628592868878947454846945185246181960728531350526623745',
	'4O' : '55098772033182588594042628592868878947454846945185246181960728532450038251521',
	'5O' : '55098772033182588594042628592868878947454846945185246181960728533549549879297',
	'6O' : '55098772033182588594042628592868878947454846945185246181960728534649061507073',
	'7O' : '55098772033182588594042628592868878947454846945185246181960728535748573134849',
	'8O' : '55098772033182588594042628592868878947454846945185246181960728536848084762625',
	'9O' : '55098772033182588594042628592868878947454846945185246181960728537947596390401',
	'10O' : '55098772033182588594042628592868878947454846945185246181960728539047108018177',
	'11O' : '55098772033182588594042628592868878947454846945185246181960728540146619645953',
	'12O' : '55098772033182588594042628592868878947454846945185246181960728541246131273729',
	'13O' : '55098772033182588594042628592868878947454846945185246181960728542345642901505',
	'14O' : '55098772033182588594042628592868878947454846945185246181960728543445154529281',
	'15O' : '55098772033182588594042628592868878947454846945185246181960728544544666157057',
	'15A' : '55098772033182588594042628592868878947454846945185246181960728545644177784833',
	'15B' : '55098772033182588594042628592868878947454846945185246181960728546743689412609',
	'15C' : '55098772033182588594042628592868878947454846945185246181960728547843201040385',
	'15D' : '55098772033182588594042628592868878947454846945185246181960728548942712668161',
	'15E' : '55098772033182588594042628592868878947454846945185246181960728550042224295937',
	'15F' : '55098772033182588594042628592868878947454846945185246181960728551141735923713',
	'15G' : '55098772033182588594042628592868878947454846945185246181960728552241247551489',
	'15H' : '55098772033182588594042628592868878947454846945185246181960728553340759179265',
	'15I' : '55098772033182588594042628592868878947454846945185246181960728554440270807041',
	'15J' : '55098772033182588594042628592868878947454846945185246181960728555539782434817',
	'15K' : '55098772033182588594042628592868878947454846945185246181960728556639294062593',
	'15L' : '55098772033182588594042628592868878947454846945185246181960728557738805690369',
	'15M' : '55098772033182588594042628592868878947454846945185246181960728558838317318145',
	'15N' : '55098772033182588594042628592868878947454846945185246181960728559937828945921',
	'1P' : '55098772033182588594042628592868878947454846945185246181960728561037340573697',
	'2P' : '55098772033182588594042628592868878947454846945185246181960728562136852201473',
	'3P' : '55098772033182588594042628592868878947454846945185246181960728563236363829249',
	'4P' : '55098772033182588594042628592868878947454846945185246181960728564335875457025',
	'5P' : '55098772033182588594042628592868878947454846945185246181960728565435387084801',
	'6P' : '55098772033182588594042628592868878947454846945185246181960728566534898712577',
	'7P' : '55098772033182588594042628592868878947454846945185246181960728567634410340353',
	'8P' : '55098772033182588594042628592868878947454846945185246181960728568733921968129',
	'9P' : '55098772033182588594042628592868878947454846945185246181960728569833433595905',
	'10P' : '55098772033182588594042628592868878947454846945185246181960728570932945223681',
	'11P' : '55098772033182588594042628592868878947454846945185246181960728572032456851457',
	'12P' : '55098772033182588594042628592868878947454846945185246181960728573131968479233',
	'13P' : '55098772033182588594042628592868878947454846945185246181960728574231480107009',
	'14P' : '55098772033182588594042628592868878947454846945185246181960728575330991734785',
	'15P' : '55098772033182588594042628592868878947454846945185246181960728576430503362561',
	'16P' : '55098772033182588594042628592868878947454846945185246181960728577530014990337',
	'16A' : '55098772033182588594042628592868878947454846945185246181960728578629526618113',
	'16B' : '55098772033182588594042628592868878947454846945185246181960728579729038245889',
	'16C' : '55098772033182588594042628592868878947454846945185246181960728580828549873665',
	'16D' : '55098772033182588594042628592868878947454846945185246181960728581928061501441',
	'16E' : '55098772033182588594042628592868878947454846945185246181960728583027573129217',
	'16F' : '55098772033182588594042628592868878947454846945185246181960728584127084756993',
	'16G' : '55098772033182588594042628592868878947454846945185246181960728585226596384769',
	'16H' : '55098772033182588594042628592868878947454846945185246181960728586326108012545',
	'16I' : '55098772033182588594042628592868878947454846945185246181960728587425619640321',
	'16J' : '55098772033182588594042628592868878947454846945185246181960728588525131268097',
	'16K' : '55098772033182588594042628592868878947454846945185246181960728589624642895873',
	'16L' : '55098772033182588594042628592868878947454846945185246181960728590724154523649',
	'16M' : '55098772033182588594042628592868878947454846945185246181960728591823666151425',
	'16N' : '55098772033182588594042628592868878947454846945185246181960728592923177779201',
	'16O' : '55098772033182588594042628592868878947454846945185246181960728594022689406977',

}


function wei2eth(wei) {
	//so good?
	return wei/1000000000000000000;
	//so good!
}

function getData(t) {
  return new Promise(function(resolve, reject) {
    var token = tokens[t];

    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://api.opensea.io/api/v1/assets?token_ids=' + token + '&collection_slug=canvaisland&order_direction=desc&limit=20&include_orders=false');
    xhr.setRequestHeader('accept', 'application/json');
    xhr.setRequestHeader('X-API-KEY', '0e6a00db866b49ac89a5e273e471a65e');

    xhr.onload = function() {
      if (xhr.status === 200) {
        var response = JSON.parse(xhr.responseText);
        resolve(response);
      } else {
        reject('Request failed. Status code: ' + xhr.status);
      }
    };

    xhr.onerror = function() {
      reject('Request failed');
    };

    xhr.send();
  });
}

function hasClass(elem, className) {
	return elem.classList.contains(className);
}

document.addEventListener('mouseover', async function (e) {
	if (hasClass(e.target, 'label')) {
		e.target.classList.add('active');
		var result = scene.children.find(obj => {
			return obj.name == e.target.firstChild.innerText;
		});
		setTimeout(() => result.position.y = 1, 50);
		setTimeout(() => result.position.y = 2, 100);
		setTimeout(() => result.position.y = 3, 150);
		setTimeout(() => result.position.y = 4, 200);
	}
});

document.addEventListener('mouseout', async function (e) {
	if (e.target.matches(".label.active")) {
		e.target.classList.remove('active');
		var result = scene.children.find(obj => {
			return obj.name == e.target.firstChild.innerText;
		});
		setTimeout(() => result.position.y = 3, 50);
		setTimeout(() => result.position.y = 2, 100);
		setTimeout(() => result.position.y = 1, 150);
		setTimeout(() => result.position.y = 0, 200);
	}
});

		
document.addEventListener('click', async function(e) {
  if (hasClass(e.target, 'label')) {
	try {
	  const data = await getData(e.target.firstChild.innerText);
	  console.log('data: ', data);

		document.getElementById("info-modal_title").textContent = data.assets[0].name;
		document.getElementById("info-modal_image").src = data.assets[0].image_url;
		document.getElementById("info-modal_link").href = data.assets[0].permalink;
		
		if ( data.assets[0].last_sale ) {
			if ( data.assets[0].last_sale.transaction.from_account.user !== null ) {
				if ( data.assets[0].last_sale.transaction.from_account.user.username !== null) {
					document.getElementById("info-modal_owner").textContent = data.assets[0].last_sale.transaction.from_account.user.username;
				} else {
					document.getElementById("info-modal_owner").textContent = data.assets[0].last_sale.transaction.from_account.address.substring(2,8);
				}
			} else {
				document.getElementById("info-modal_owner").textContent = data.assets[0].last_sale.transaction.from_account.address.substring(2,8);
			}
			document.getElementById("info-modal_owner").href = 'https://opensea.io/accounts/' + data.assets[0].last_sale.transaction.from_account.address;
		} else {
			document.getElementById("info-modal_owner").textContent = 'CanvaIsland';
			document.getElementById("info-modal_owner").href = 'https://opensea.io/collection/canvaisland';
		}
				
	} catch (error) {
	  console.error(error);
	}

	document.getElementById('info-modal').classList.toggle('modal-open');

  } else if (hasClass(e.target, 'modal-open')) {
	document.getElementById('info-modal').classList.toggle('modal-open');
  }
}, false);
</script>
		
		<style>
			.modal { 
				display: flex; 
				position: fixed;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;
				z-index: -1;
				overflow-y: auto;
				-webkit-overflow-scrolling: touch;
				padding: 15px 15px;
				background: rgba(0,0,0,0.6);
				opacity: 0;
				transition: all .15s linear;
			}
			
			
			.modal.modal-open { opacity: 1; z-index: 10; } 
			
			#info-modal_body {
				padding: 30px 30px;
				opacity: 1;
				position: relative;
				box-sizing: border-box;
				margin: 0 auto;
				margin-top: auto !important;
				margin-bottom: auto !important;
				width: 600px;
				max-width: calc(100% - 0.01px) !important;
				background: #fff;
				opacity: 0;
				transform: translateY(-100px);
				transition: .3s linear;
					transition-property: all;
				transition-property: opacity,transform;
			}
			.modal-open #info-modal_body { transform: translateY(0); opacity: 1; }
			
			.modal h2, .modal h3, .modal h4 { margin: 0; margin-bottom: 20px; font-size: 1.3em; }
			
			.flex-middle { align-items: center; }
			
			.col-wrap {
				display: flex;
				flex-wrap: wrap;
				margin-left: -20px;
			}
			.col-wrap > * {
				padding-left: 20px;
				box-sizing: border-box;
			}
			.col-1-3 {width: calc(100% * 1 / 3.001);}
			.col-2-3 {width: calc(100% * 2 / 3.001);}
			
			#info-modal_image { max-width: 100%; height: auto; box-sizing: border-box; }
			#info-modal_title { margin-bottom: 20px; font-size: 2em; }
			#info-modal_owner { text-decoration: none; font-weight: 400; color: #2a94d6; }
			#info-modal_owner:hover { text-decoration: underline; }
			#info-modal_price { margin: 0; font-weight: 400; }
			#info-modal_link { 
				font-size: 1.3em; text-decoration: none; font-weight: 400; 
				color: #2a94d6;
				border: 1px solid #2a94d6;
				background-color: transparent;
				padding: 7px 15px;
				display: inline-block;
				transition: border-color, color, background-color 0.2s ease;
			}
			
			#info-modal_link:hover { 
				border-color: #2a94d6;
				background: #2a94d6;
				color: #fff;
			}
		</style>
		
		<div id='info-modal' class="modal">
			
			<div id='info-modal_body'>
				<div class='col-wrap'>
					<div class='col-1-3'>
						<img id='info-modal_image' src="">
					</div>
					<div class='col-2-3'>
						<h2 id='info-modal_title'></h3>
						<h4>Owner: <a id='info-modal_owner' href='' target='_blank'></a></h4>
						<div class='col-wrap flex-middle'>
							<div><a id='info-modal_link' target='_blank' href=''>buy it!</a></div>
							<div><h4 id='info-modal_price'></h4></div>
						</div>
					</div>
				</div>
			</div>
			
		</div>
	</body>
</html>